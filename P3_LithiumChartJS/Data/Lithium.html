<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> World Lithium Production Reseverse</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        font-family: Beirut;
      }
      .chartMenu {
        width: 100vw;
        height: 40px;
        background: #f9f7f7;
        color: rgb(246, 241, 245);
      }
      .chartMenu p {
        padding: 10px;
        font-size: 20px;
      }
      .chartCard {
        width: 100vw;
        height: calc(150vh - 40px);
        background: rgba(186, 245, 207, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .chartBox {
        width: 900px;
        padding: 20px;
        border-radius: 20px;
        border: solid 3px rgb(127, 249, 159);
        background: rgb(243, 247, 244);
      }
    </style>
  </head>
  <body>
    <div class="chartMenu">
    </div>
    <div class="chartCard">
      <div class="chartBox">
        <canvas id="myChart"></canvas>
        <canvas id="myChart2"></canvas>
        <button onclick="updateChart()">1995</button>
        <button onclick="updateChart2()">2021</button>
        </div>
      
      </div>
    </div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
  
    <script>
      //BEGIN CHART
      //Fetch
      function updateChart() {
        async function fetchData() {
        const url = 'http://localhost:8000/Desktop/P3_LithiumChartJS/Data/LPR2021.json';
        const response = await fetch(url);
          //wait for the response
        const datapoints = await response.json();
        console.log(datapoints);
        return datapoints;
        };
      
         //values  
        fetchData().then(datapoints => {
            const place = datapoints.map(
              function(index){[0]
                return index.Country;
              })
            const lithium = datapoints.map(
              function(index){[0]
                return index.lithiumproductionreserves;
              })
          console.log(place);
          console.log(lithium);
          myChart.config.data.labels = place;
          myChart.config.data.datasets[0].data = lithium;
          myChart.update();
        
        });
      }
    // setup 
    const data = {
      labels: ['Africa' ,'Argentina', 'Asia', 'Australia','Brazil', 'Chile', 'China', 'Europe', 'High-income countries', 'Lower-middle-income countries','North America', 'Oceania', 'Portugal', 'Rest of World (BP)', 'South America', 'United States', 'Upper-middle-income countries', 'World', 'Zimbabwe'],
      datasets: [{
        axis: 'y',
        label: 'Lithium Pruduction Reserves 1995',
        data: [20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20 ],
        
        backgroundColor: [
          'Greens3 (#e5f5e0, #a1d99b, #31a354)',
          'Greens4 (#edf8e9', '#bae4b3', '#74c476', '#238b45)',
          'Greens5  (#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c)',
          'Greens6  (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c)',
          'Greens7 (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens8 (#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens9 (#f7fcf5', '#e5f5e0', '#c7e9c0)'
                ],
        borderColor: [
        'Greens3 (#e5f5e0, #a1d99b, #31a354)',
          'Greens4 (#edf8e9', '#bae4b3', '#74c476', '#238b45)',
          'Greens5  (#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c)',
          'Greens6  (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c)',
          'Greens7 (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens8 (#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens9 (#f7fcf5', '#e5f5e0', '#c7e9c0)'
        ],
        borderWidth: 2
      }]
    };

  // config block
  const config = {
  type: 'bar',
  data,
  options: {
    indexAxis: 'y',
    beginAtZero: true
  }
};

    // render init block
    const myChart = new Chart(
      document.getElementById('myChart'),
      config
    );
//BEGIN CHART 2========================
      //Fetch
      function updateChart2() {
        async function fetchData() {
        const url = 'http://localhost:8000/Desktop/P3_LithiumChartJS/Data/LPR1995.json';
        const response = await fetch(url);
          //wait for the response
        const datapoints = await response.json();
        console.log(datapoints);
        return datapoints;
        };
      
         //values  
        fetchData().then(datapoints => {
            const placeE = datapoints.map(
              function(index){[0]
                return index.Country;
              })
            const lithiumM = datapoints.map(
              function(index){[0]
                return index.lithiumproductionreserves;
              })
          console.log(placeE);
          console.log(lithiumM);
          myChart2.config.data.labels = placeE;
          myChart2.config.data.datasets[0].data = lithiumM;
          myChart2.update();
        
        });
      }
    // setup 
    const dataA = {
      labels: ['Africa' ,'Argentina', 'Asia', 'Australia','Brazil', 'Chile', 'China', 'Europe', 'High-income countries', 'Lower-middle-income countries','North America', 'Oceania', 'Portugal', 'Rest of World (BP)', 'South America', 'United States', 'Upper-middle-income countries', 'World', 'Zimbabwe'],
      datasets: [{
        axis: 'y',
        label: 'Lithium Pruduction Reserves 2021',
        data: [20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20 ],
        
        backgroundColor: [
          'Greens3 (#e5f5e0, #a1d99b, #31a354)',
          'Greens4 (#edf8e9', '#bae4b3', '#74c476', '#238b45)',
          'Greens5  (#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c)',
          'Greens6  (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c)',
          'Greens7 (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens8 (#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens9 (#f7fcf5', '#e5f5e0', '#c7e9c0)'
                ],
        borderColor: [
        'Greens3 (#e5f5e0, #a1d99b, #31a354)',
          'Greens4 (#edf8e9', '#bae4b3', '#74c476', '#238b45)',
          'Greens5  (#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c)',
          'Greens6  (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c)',
          'Greens7 (#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens8 (#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32)',
          'Greens9 (#f7fcf5', '#e5f5e0', '#c7e9c0)'
        ],
        borderWidth: 2
      }]
    };

  // config block
  const config2 = {
  type: 'bar',
  data: dataA,
  options: {
    indexAxis: 'y',
    beginAtZero: true
  }
};

    // render init block
    const myChart2 = new Chart(
      document.getElementById('myChart2'),
      config2
    );

    // Instantly assign Chart.js version
    const chartVersionN = document.getElementById('chartVersion');
    //chartVersion.innerText = Chart.version;
    // Instantly assign Chart.js version
    const chartVersion = document.getElementById('chartVersion');
    //chartVersion.innerText = Chart.version;
    </script>

  </body>
</html>